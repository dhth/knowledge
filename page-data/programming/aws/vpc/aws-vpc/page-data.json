{"componentChunkName":"component---node-modules-gatsby-theme-kb-src-templates-topic-js","path":"/programming/aws/vpc/aws-vpc","result":{"data":{"file":{"childMdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"AWS VPC\"), mdx(\"h2\", null, \"Resources\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.youtube.com/watch?v=hiKPPy584Mg\"\n  }, \"AWS Networking Fundamentals\"))), mdx(\"h2\", null, \"Modules\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"01-add-private-subnets-to-existing-vpc\",\n    \"title\": \"01-add-private-subnets-to-existing-vpc\"\n  }, \"[[01-add-private-subnets-to-existing-vpc]]\"), \"\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"","private":false},"outboundReferences":[{"contextLine":"- [[01-add-private-subnets-to-existing-vpc]]","targetAnchor":null,"refWord":"01-add-private-subnets-to-existing-vpc","target":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Add private subnets to existing VPC\"), mdx(\"h2\", null, \"Resources\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://stackoverflow.com/questions/61265108/aws-ecs-fargate-resourceinitializationerror-unable-to-pull-secrets-or-registry\"\n  }, \"AWS ECS Fargate ResourceInitializationError: unable to pull secrets or registry auth\"))), mdx(\"h2\", null, \"Setup\"), mdx(\"h3\", null, \"Usecase\"), mdx(\"p\", null, \"You need to run Fargate service(s) in private subnets, but they don't\\nexist yet. The containers (running on ECS) need to be able to make outgoing\\nnetwork calls.\"), mdx(\"p\", null, \"Let's say the CIDR of the VPC is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"172.31.0.0/16\"), \". More about CIDRs here: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"../../../computer-science/computer-networking/wiki/cidr\",\n    \"title\": \"cidr\"\n  }, \"[[cidr]]\"), \"\"), mdx(\"h3\", null, \"Solution\"), mdx(\"p\", null, \"First of all, the private subnet(s) need NAT gateway(s) to forward network\\ntraffic to the VPC's Internet Gateway. Create a public subnet in the VPC if it\\ndoesn't already exist, and then create a NAT gateway in this subnet.\"), mdx(\"p\", null, \"Let's say the CIDR of the public subnet is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"172.31.0.0/20\"), \".\"), mdx(\"p\", null, \"Then, create a private subnet in the VPC.\"), mdx(\"p\", null, \"Let's say the CIDR of the private subnet is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"172.31.48.0/20\"), \".\"), mdx(\"p\", null, \"Once created, its route table will need to be modified (or maybe a new route\\ntable will have to be created). The primary thing to note is that this route\\ntable needs to have a route where the destination of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"0.0.0.0/0\"), \" points to the\\ntarget of the NAT gateway created before. This means that all network packets\\nthat are intended for the public internet will be sent to the NAT gateway, which\\nwill then forward them to the Internet Gateway (for that VPC).\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/knowledge/448b6b377a9c3882021b2b9f9eba4523/route-table.png\",\n    \"alt\": \"route-table\"\n  })), mdx(\"p\", null, \"Once all of this is set up, the ECS containers in the private subnet will be\\nable to make outgoing calls to the public internet.\"));\n}\n;\nMDXContent.isMDXComponent = true;","parent":{"id":"7ade9fff-f5cb-5442-a429-224306964551","fields":{"slug":"/programming/aws/vpc/01-add-private-subnets-to-existing-vpc","title":"Add private subnets to existing VPC"}}}}],"inboundReferences":[{"contextLine":"- [[aws-vpc]]","referrer":{"parent":{"id":"4d72fe9c-951a-594a-b173-696898647794","fields":{"slug":"/programming/aws/aws","title":"AWS"}}}}]},"fields":{"slug":"/programming/aws/vpc/aws-vpc","title":"AWS VPC"}}},"pageContext":{"id":"ac844032-301e-5b71-a151-407569f029d3","refWordMdxSlugDict":{"01-add-private-subnets-to-existing-vpc":"programming/aws/vpc/01-add-private-subnets-to-existing-vpc","cidr":"computer-science/computer-networking/wiki/cidr"}}},"staticQueryHashes":["2221750479","2380733210","2768355698","63159454","847517413"]}